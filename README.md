<div>
    <h1>
        IsaacCoyote    
        <img alt="GitHub Release" src="https://img.shields.io/github/v/release/QDis233/IsaacCoyote?style=flat&labelColor=000000">
        <img alt="GitHub License" src="https://img.shields.io/github/license/QDis233/IsaacCoyote?style=flat&labelColor=000000">
    </h1>
</div>

**IsaacCoyote 可以让郊狼与 The Binding of Isaac (REP/REP+ Only) 连接**  
带来沉浸式的体验 ( ?

# 功能

- 多样的触发事件:
   - 受击
      - 在受伤时触发的发电事件
   - 死亡
      - 在角色死亡时触发的发电事件
   - 获取道具
      - 在 获取道具 时提高对应的强度
   - 重开
      - 在手动重开游戏时发电
- 可自定义的 强度/ 波形
- 热重载的配置文件
- 游戏内的强度指示器

# 使用方法

1. 前往 [releases](https://github.com/QDis233/IsaacCoyote/releases/latest) 下载预编译的文件
2. 解压压缩包到任意文件夹
3. 解压后将目录内 "isaac-coyote" 文件夹复制到 "The Binding of Isaac: Repentance" 的 mods 目录下
   - 可在 steam > 库 > Isaac > 管理(齿轮图标) > 浏览本地文件 找到
4. 启动游戏，并启用 mod
   - 在 steam 创意工坊 下载 MCM(Mod Config Menu)MOD 用于调节游戏内强度指示器的位置 (可选)
5. 仔细阅读并配置 config.yaml
   - 配置文件为热重载, 保存后即可生效
   - 详见 [`配置文件`](#配置文件)
6. 启动 IsaacCoyote.exe 控制器, 使用 `DG-LAB` app `SOCKET控制` 功能扫码连接

# 常见问题

- ERROR 或许你有多个ip地址
  - 在下方列出的ip地址中选择正确的那个，填入配置文件 [`控制器配置`](#控制器配置) 中的 address 中
- 有关 [错误道具](https://isaac.huijiwiki.com/wiki/%E9%81%93%E5%85%B7/%E9%94%99%E8%AF%AF%E9%81%93%E5%85%B7)
  - v1.0.1 中忽略了错误道具, 因此捡到错误道具不会增加强度
  - v1.0.0 中捡到错误道具会报错

# 配置文件

配置文件为 `config.yaml`, 请放在 IsaacCoyote.exe 同级目录下

## 基础配置

```yaml
name: "IsaacCoyote"
version: "0.3b"
debug: false
```

## 控制器配置

- ip 地址默认留空即可, 如果需要手动指定, 请填写机器正确的的 局域网 ip 地址
- 特别注意: 使用时请关闭网关设备的 `AP隔离` 功能

```yaml
coyote:
  address: "" # ip地址，默认留空即可（默认自动检测）
  port: 8800
```

## 强度与模式

```yaml
game:
  # 基础强度
  base_strength_A: 20
  base_strength_B: 20

  # 每损失一点生命值(半颗心)增加的强度
  strength_per_health_A: 2
  strength_per_health_B: 2
```

- ### 持续模式

```yaml
  continuous_mode:
    # 是否启用
    enabled: true

    # 强度缓降: 受击或死亡这样会导致强度激增的时间结束时，使强度缓降
    # 每隔 decay_interval 毫秒衰减 decay_value
    # 衰减间隔 单位 毫秒 | 设置为 0 以关闭缓降
    decay_interval: 400
    # 衰减值
    decay_value: 1

    # 此模式的波形 | 详见 波形 | 留空可关闭通道?
    pulse_A: *breathing
    pulse_B: *breathing
```

- ### 道具强度

```yaml
# 在获取 道具 (collectible) 后增加强度
on_new_collectible:
  # 是否开启此事件
  enabled: true
  strength_config:
    1: # 一级
      strength_add_A: 1 # 获取 quality=1 的道具时 A通道增加的强度
      strength_add_B: 1 # 获取 quality=1 的道具时 B通道增加的强度
    2: # 二级
      strength_add_A: 2
      strength_add_B: 2
    3: # 三级
      strength_add_A: 5
      strength_add_B: 5
    4: # 四级
      strength_add_A: 10
      strength_add_B: 10
```

- ### 受击

```yaml
  on_hurt:
    # 是否开启此事件
    enabled: true
    # 持续时间 单位:毫秒
    duration: 4000

    # StrengthOperator:
    # 可选: ABSOLUTE | INCREMENT
    # ABSOLUTE 将强度设为 strength_A
    # INCREMENT 在 当前强度 上增加 strength_A
    strength_operator: INCREMENT

    strength_A: 40
    strength_B: 40

    # 此模式的波形 | 详见 波形 | 留空可关闭通道?
    pulse_A: *grainy
    pulse_B: *grainy
```

- ### 死亡

```yaml
  on_death:
    # 是否开启此事件
    enabled: true
    # 持续时间 单位:毫秒
    duration: 15000

    # StrengthOperator:
    # 可选: ABSOLUTE | INCREMENT
    # ABSOLUTE 将强度设为 strength_A
    # INCREMENT 在 当前强度 上增加 strength_A
    strength_operator: INCREMENT

    strength_A: 60
    strength_B: 60

    # 此模式的波形 | 详见 波形 | 留空可关闭通道?
    pulse_A: *compress
    pulse_B: *compress
```

- ### 重开游戏

```yaml
  # On Manual Restart 开启后在 手动重开游戏 时发电
  # 具体逻辑: 上一次游戏 未死亡 且 未达成结局 并 退出游戏 后 开始新游戏
  on_manual_restart:
    # 启用?
    enabled: true
    # 持续时间 单位:毫秒
    duration: 30000

    # StrengthOperator:
    # 可选: ABSOLUTE | INCREMENT
    # ABSOLUTE 将强度设为 strength_A
    # INCREMENT 在 基础强度(base_strength_A) 上增加 strength_A
    # (注意是在 "基础强度" 上增加; 因为触发时不在游戏中, 计算道具，血量没有意义......)
    strength_operator: ABSOLUTE

    strength_A: 80
    strength_B: 80
    # 此模式的波形 | 详见 波形 | 留空可关闭通道?
    pulse_A: *compress
    pulse_B: *compress
```

## 波形

在 `config.yaml` 文件中对应模式的 `pulse_A` 或 `pulse_B` 字段中配置

- 请直接以 列表字符串 形式填入对应模式的 `pulse_A` 或 `pulse_B` 中
- 示例配置已提供了官方波形, 使用了 yaml `&`锚点和 `*`别名特性，可以用来引用
- 使用例子: pulse_A/B: *breathing/*tide/...
- [官方文档](https://github.com/DG-LAB-OPENSOURCE/DG-LAB-OPENSOURCE/tree/main) 给出的的格式

## 波形配置

```yaml
pulsewaves:
  # 呼吸
  breathing: &breathing '["0A0A0A0A00000000","0A0A0A0A14141414","0A0A0A0A28282828","0A0A0A0A3C3C3C3C","0A0A0A0A50505050","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000"]'
  # 潮汐
  tide: &tide '["0A0A0A0A00000000","0D0D0D0D0F0F0F0F","101010101E1E1E1E","1313131332323232","1616161641414141","1A1A1A1A50505050","1D1D1D1D64646464","202020205A5A5A5A","2323232350505050","262626264B4B4B4B","2A2A2A2A41414141","0A0A0A0A00000000"]'
  # 连击
  pulsating: &pulsating '["0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A00000000"]'
  # 快速按捏
  quick_rub: &quick_rub '["0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A00000000"]'
  #  按捏渐强
  gradual_rub: &gradual_rub '["0A0A0A0A00000000","0A0A0A0A19191919","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A00000000","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A55555555","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A00000000"]'
  # 心跳节奏
  heartbeat: &heartbeat '["7070707064646464","7070707064646464","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A46464646","0A0A0A0A50505050","0A0A0A0A5A5A5A5A","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000"]'
  # 压缩
  compress: &compress '["4A4A4A4A64646464","4545454564646464","4040404064646464","3B3B3B3B64646464","3636363664646464","3232323264646464","2D2D2D2D64646464","2828282864646464","2323232364646464","1E1E1E1E64646464","1A1A1A1A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464","0A0A0A0A64646464"]'
  # 节奏步伐
  rhythmic: &rhythmic '["0A0A0A0A00000000","0A0A0A0A14141414","0A0A0A0A28282828","0A0A0A0A3C3C3C3C","0A0A0A0A50505050","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A19191919","0A0A0A0A32323232","0A0A0A0A4B4B4B4B","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A1E1E1E1E","0A0A0A0A41414141","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000"]'
  # 颗粒摩擦
  grainy: &grainy '["0A0A0A0A64646464","0D0D0D0D64646464","1010101064646464","1414141400000000","1717171764646464","1B1B1B1B64646464","1E1E1E1E64646464","2222222200000000","2525252564646464","2929292964646464","2C2C2C2C64646464","3030303000000000"]'
  # 渐变弹跳
  bouncy: &bouncy '["0A0A0A0A00000000","0A0A0A0A1E1E1E1E","0B0B0B0B41414141","0C0C0C0C64646464","0D0D0D0D00000000","0E0E0E0E1E1E1E1E","0F0F0F0F41414141","1010101064646464","1111111100000000","121212121E1E1E1E","1313131341414141","1414141464646464","1515151500000000","161616161E1E1E1E","1717171741414141","1818181864646464","1919191900000000","1A1A1A1A1E1E1E1E","1B1B1B1B41414141","1C1C1C1C64646464","1D1D1D1D00000000","1E1E1E1E1E1E1E1E","1F1F1F1F41414141","2020202064646464","2121212100000000","222222221E1E1E1E","2323232341414141","2424242464646464","2525252500000000","262626261E1E1E1E","2727272741414141","2828282864646464","0A0A0A0A00000000","0A0A0A0A00000000"]'
  # 波浪涟漪
  ripple: &ripple '["0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000","0A0A0A0A32323232","0A0A0A0A64646464","0A0A0A0A46464646","0A0A0A0A00000000"]'
  #雨水冲刷
  rainfall: &rainfall '["0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","0E0E0E0E1E1E1E1E","0E0E0E0E41414141","0E0E0E0E64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","3A3A3A3A64646464","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000","0A0A0A0A00000000"]'
  #变速敲击
  tempo_tap: &tempo_tap '["1818181864646464","1818181864646464","1818181864646464","1818181800000000","1818181800000000","1818181800000000","1818181800000000","1818181864646464","1818181864646464","1818181864646464","1818181800000000","1818181800000000","1818181800000000","1818181800000000","1818181864646464","1818181864646464","1818181864646464","1818181800000000","1818181800000000","1818181800000000","1818181800000000","1818181864646464","1818181864646464","1818181864646464","1818181800000000","1818181800000000","1818181800000000","1818181800000000","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","7070707064646464","0A0A0A0A00000000","0A0A0A0A00000000"]'
  #信号灯
  signal: &signal '["BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","BEBEBEBE64646464","0A0A0A0A00000000","101010101E1E1E1E","1717171741414141","1E1E1E1E64646464","0A0A0A0A00000000","101010101E1E1E1E","1717171741414141","1E1E1E1E64646464","0A0A0A0A00000000","101010101E1E1E1E","1717171741414141","1E1E1E1E64646464"]'
  #挑逗1
  tease1: &tease1 '["0A0A0A0A00000000","0C0C0C0C19191919","0E0E0E0E32323232","101010104B4B4B4B","1212121264646464","1515151564646464","1717171764646464","1919191900000000","1B1B1B1B00000000","1E1E1E1E00000000","0A0A0A0A00000000","0C0C0C0C19191919","0E0E0E0E32323232","101010104B4B4B4B","1212121264646464","1515151564646464","1717171764646464","1919191900000000","1B1B1B1B00000000","1E1E1E1E00000000","0A0A0A0A00000000","0C0C0C0C19191919","0E0E0E0E32323232","101010104B4B4B4B","1212121264646464","1515151564646464","1717171764646464","1919191900000000","1B1B1B1B00000000","1E1E1E1E00000000","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000","0A0A0A0A64646464","0A0A0A0A00000000"]'
  #挑逗2
  tease2: &tease2 '["2525252500000000","222222220A0A0A0A","2020202014141414","1E1E1E1E1E1E1E1E","1B1B1B1B2D2D2D2D","1919191937373737","1717171741414141","141414144B4B4B4B","1212121255555555","1010101064646464","2525252500000000","222222220A0A0A0A","2020202014141414","1E1E1E1E1E1E1E1E","1B1B1B1B2D2D2D2D","1919191937373737","1717171741414141","141414144B4B4B4B","1212121255555555","1010101064646464","0A0A0A0A64646464","0A0A0A0A00000000","0B0B0B0B64646464","0C0C0C0C00000000","0D0D0D0D64646464","0E0E0E0E00000000","0F0F0F0F64646464","1010101000000000","1010101064646464","1111111100000000","1212121264646464","1313131300000000","1414141464646464","1515151500000000","1616161664646464","1717171700000000","1717171764646464","1818181800000000","1919191964646464","1A1A1A1A00000000","1B1B1B1B64646464","1C1C1C1C00000000","1D1D1D1D64646464","1E1E1E1E00000000","0A0A0A0A00000000","0A0A0A0A00000000"]'
```
